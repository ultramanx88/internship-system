# 📋 ระบบจัดการฝึกงาน - ข้อมูลผู้ใช้งาน Production

## 🌐 **URLs ระบบ:**

- **HTTPS (IP):** https://203.170.129.199:8443/
- **HTTPS (Domain):** https://internship.dev.smart-solutions.com/
- **API:** https://internship.dev.smart-solutions.com/api/v1/
- **Portal หลัก:** http://dev.smart-solutions.com:8080/

---

## 👥 **ข้อมูลผู้ใช้งานทั้งหมด (35 คน)**

### 🔑 **Admin Users (ผู้ดูแลระบบ) - 6 คน**

| Student ID | Email                        | Password     | Full Name            | สถานะ          |
| ---------- | ---------------------------- | ------------ | -------------------- | -------------- |
| admin2     | admin2@smart-solutions.com   | **admin123** | System Administrator | ✅ ทดสอบแล้ว   |
| demo001    | demo001@smart-solutions.com  | **123456**   | Demo Admin 001       | ✅ พร้อมใช้งาน |
| admin      | admin@smart-solutions.com    | **123456**   | System Administrator | ✅ พร้อมใช้งาน |
| admin001   | admin001@smart-solutions.com | **123456**   | Admin 001            | ✅ พร้อมใช้งาน |
| admin002   | admin002@smart-solutions.com | **123456**   | Admin 002            | ✅ พร้อมใช้งาน |
| admin003   | admin003@smart-solutions.com | **123456**   | Admin 003            | ✅ พร้อมใช้งาน |

### 👔 **Staff Users (เจ้าหน้าที่) - 2 คน**

| Student ID | Email                        | Password   | Full Name | สถานะ          |
| ---------- | ---------------------------- | ---------- | --------- | -------------- |
| s6800001   | s6800001@smart-solutions.com | **123456** | Staff 001 | ✅ พร้อมใช้งาน |
| s6800002   | s6800002@smart-solutions.com | **123456** | Staff 002 | ✅ พร้อมใช้งาน |

### 👨‍🏫 **Instructor Users (อาจารย์) - 3 คน**

| Student ID | Email                        | Password   | Full Name      | สถานะ          |
| ---------- | ---------------------------- | ---------- | -------------- | -------------- |
| t6800001   | t6800001@smart-solutions.com | **123456** | Instructor 001 | ✅ พร้อมใช้งาน |
| t6800002   | t6800002@smart-solutions.com | **123456** | Instructor 002 | ✅ พร้อมใช้งาน |
| t6800003   | t6800003@smart-solutions.com | **123456** | Instructor 003 | ✅ พร้อมใช้งาน |

### 🏛️ **Committee Users (คณะกรรมการ) - 2 คน**

| Student ID | Email                        | Password   | Full Name     | สถานะ          |
| ---------- | ---------------------------- | ---------- | ------------- | -------------- |
| t6800004   | t6800004@smart-solutions.com | **123456** | Committee 004 | ✅ พร้อมใช้งาน |
| t6800005   | t6800005@smart-solutions.com | **123456** | Committee 005 | ✅ พร้อมใช้งาน |

### 🎓 **Student Users (นักศึกษา) - 22 คน**

| Student ID | Email                        | Password   | Full Name    | สถานะ              |
| ---------- | ---------------------------- | ---------- | ------------ | ------------------ |
| test001    | test@test.com                | **123456** | Test User    | ✅ ทดสอบแล้ว       |
| 65010001   | student@test.com             | **123456** | Student User | ✅ พร้อมใช้งาน     |
| u6800001   | u6800001@smart-solutions.com | **123456** | Student 001  | 🔄 ต้องเปลี่ยนรหัส |
| u6800002   | u6800002@smart-solutions.com | **123456** | Student 002  | 🔄 ต้องเปลี่ยนรหัส |
| u6800003   | u6800003@smart-solutions.com | **123456** | Student 003  | 🔄 ต้องเปลี่ยนรหัส |
| u6800004   | u6800004@smart-solutions.com | **123456** | Student 004  | 🔄 ต้องเปลี่ยนรหัส |
| u6800005   | u6800005@smart-solutions.com | **123456** | Student 005  | 🔄 ต้องเปลี่ยนรหัส |
| u6800006   | u6800006@smart-solutions.com | **123456** | Student 006  | 🔄 ต้องเปลี่ยนรหัส |
| u6800007   | u6800007@smart-solutions.com | **123456** | Student 007  | 🔄 ต้องเปลี่ยนรหัส |
| u6800008   | u6800008@smart-solutions.com | **123456** | Student 008  | 🔄 ต้องเปลี่ยนรหัส |
| u6800009   | u6800009@smart-solutions.com | **123456** | Student 009  | 🔄 ต้องเปลี่ยนรหัส |
| u6800010   | u6800010@smart-solutions.com | **123456** | Student 010  | 🔄 ต้องเปลี่ยนรหัส |
| u6800011   | u6800011@smart-solutions.com | **123456** | Student 011  | 🔄 ต้องเปลี่ยนรหัส |
| u6800012   | u6800012@smart-solutions.com | **123456** | Student 012  | 🔄 ต้องเปลี่ยนรหัส |
| u6800013   | u6800013@smart-solutions.com | **123456** | Student 013  | 🔄 ต้องเปลี่ยนรหัส |
| u6800014   | u6800014@smart-solutions.com | **123456** | Student 014  | 🔄 ต้องเปลี่ยนรหัส |
| u6800015   | u6800015@smart-solutions.com | **123456** | Student 015  | 🔄 ต้องเปลี่ยนรหัส |
| u6800016   | u6800016@smart-solutions.com | **123456** | Student 016  | 🔄 ต้องเปลี่ยนรหัส |
| u6800017   | u6800017@smart-solutions.com | **123456** | Student 017  | 🔄 ต้องเปลี่ยนรหัส |
| u6800018   | u6800018@smart-solutions.com | **123456** | Student 018  | 🔄 ต้องเปลี่ยนรหัส |
| u6800019   | u6800019@smart-solutions.com | **123456** | Student 019  | 🔄 ต้องเปลี่ยนรหัส |
| u6800020   | u6800020@smart-solutions.com | **123456** | Student 020  | 🔄 ต้องเปลี่ยนรหัส |

---

## 🔐 **รหัสผ่านเริ่มต้น:**

- **รหัสผ่านเริ่มต้นสำหรับทุกคน:** `123456`
- **ยกเว้น Admin2:** `admin123`
- **⚠️ สำคัญ:** ระบบใช้ bcrypt hashing สำหรับความปลอดภัย

---

## 🧪 **การทดสอบระบบ:**

### ✅ **Login ที่ทดสอบแล้ว:**

```bash
# Admin
curl -k -X POST https://203.170.129.199:8443/api/v1/login \
  -H "Content-Type: application/json" \
  -d '{"email":"demo001@smart-solutions.com","password":"demo123"}'

# Student
curl -k -X POST https://203.170.129.199:8443/api/v1/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@test.com","password":"123456"}'
```

### 🌐 **Web Interface:**

1. เปิด https://203.170.129.199:8443/
2. ใส่ Email และ Password
3. กดปุ่ม "เข้าสู่ระบบ"

---

## 📊 **สถิติผู้ใช้งาน:**

| Role           | จำนวน     | รายละเอียด        |
| -------------- | --------- | ----------------- |
| **Admin**      | 6 คน      | ผู้ดูแลระบบ       |
| **Staff**      | 2 คน      | เจ้าหน้าที่ธุรการ |
| **Instructor** | 3 คน      | อาจารย์ประจำวิชา  |
| **Committee**  | 2 คน      | คณะกรรมการ        |
| **Student**    | 22 คน     | นักศึกษา          |
| **รวมทั้งหมด** | **35 คน** | ผู้ใช้งานทั้งระบบ |

---

## 🔧 **การจัดการระบบ:**

### 🔄 **Restart ระบบ:**

```bash
ssh root@203.170.129.199 "cd /opt/internship-system && docker-compose -f deployment/docker-compose.prod.yml --env-file .env.production restart"
```

### 📊 **ตรวจสอบสถานะ:**

```bash
ssh root@203.170.129.199 "cd /opt/internship-system && docker-compose -f deployment/docker-compose.prod.yml --env-file .env.production ps"
```

### 📝 **ดู Logs:**

```bash
ssh root@203.170.129.199 "cd /opt/internship-system && docker logs internship_backend --tail 20"
```

### 🗄️ **เข้าถึงฐานข้อมูล:**

```bash
ssh root@203.170.129.199 "cd /opt/internship-system && docker exec -it internship_db psql -U internship_user -d internship_prod"
```

---

## 🚀 **สถานะระบบ:**

- ✅ **Backend API:** ทำงานปกติ
- ✅ **Frontend Web:** ทำงานปกติ
- ✅ **Database:** PostgreSQL พร้อมใช้งาน
- ✅ **Authentication:** ระบบ Login/Register ทำงานได้
- ✅ **HTTPS:** SSL Certificate พร้อมใช้งาน
- ✅ **Demo Users:** 35 คน พร้อมใช้งาน

**ระบบพร้อมใช้งาน Production แล้ว!** 🎉

---

## 📞 **การติดต่อ:**

- **Server IP:** 203.170.129.199
- **HTTPS Port:** 8443
- **HTTP Port:** 8080 (redirect to HTTPS)
- **Database Port:** 5433 (localhost only)

## 🔧 **การแก้ไขปัญหาการเพิ่มผู้ใช้งาน:**

### ปัญหาที่พบ:

- ไม่สามารถเพิ่มผู้ใช้งานใหม่ได้ในหน้า `/admin/users`
- ผู้ใช้งานที่เพิ่มไม่แสดงในรายชื่อ

### สาเหตุ:

1. ไม่มี API endpoint `/api/users` ใน frontend
2. User management routes ถูก disable ใน backend
3. User handler และ service ไม่ได้ถูกเปิดใช้งาน

### การแก้ไข:

1. ✅ สร้าง `/api/users.js` ใน frontend
2. ✅ เปิดใช้งาน user routes ใน backend
3. ✅ สร้าง user handler และ service ใหม่
4. ✅ อัพเดท frontend ให้เรียกใช้ API จริง
5. ✅ สร้างสคริปต์ deploy และ restart

### วิธีการ Deploy การแก้ไข:

```bash
# Deploy การแก้ไขทั้งหมด
./scripts/deploy-user-management-fix.sh

# หรือ restart และ import users
./scripts/restart-and-import-users.sh
```

### การทดสอบ:

1. เข้าสู่ระบบด้วย admin account
2. ไปที่ `/admin/users`
3. ลองเพิ่มผู้ใช้งานใหม่
4. ตรวจสอบว่าผู้ใช้งานแสดงในรายชื่อ

---

**วันที่อัพเดทล่าสุด:** 28 กันยายน 2025

## 🔧 **การแก้ไขปัญหาการเพิ่มผู้ใช้งาน (อัพเดท):**

### ปัญหาใหม่ที่พบ:

- **เพิ่มผู้ใช้งานใหม่ไม่เข้า** แต่แก้ไขผู้ใช้งานที่มีอยู่แล้วได้
- ข้อผิดพลาดเกิดจากการขาด `role` field ใน User model

### สาเหตุเพิ่มเติม:

4. User model ไม่มี `role` column ในฐานข้อมูล
5. UserService พยายามใช้ role field ที่ไม่มีอยู่
6. Database schema ไม่ตรงกับ code

### การแก้ไขเพิ่มเติม:

6. ✅ เพิ่ม `role` column ใน User model
7. ✅ อัพเดท database schema ด้วย migration script
8. ✅ แก้ไข demo users SQL ให้ใช้ structure ใหม่
9. ✅ อัพเดท UserService ให้รองรับ role field

### วิธีการ Deploy การแก้ไขใหม่:

```bash
# แก้ไขปัญหาการสร้างผู้ใช้งาน (รันคำสั่งนี้)
./scripts/fix-user-creation.sh

# หรือทีละขั้นตอน
./scripts/fix-user-creation.sh db-only      # อัพเดทฐานข้อมูลอย่างเดียว
./scripts/fix-user-creation.sh restart-only # restart services อย่างเดียว
./scripts/fix-user-creation.sh test-only    # ทดสอบอย่างเดียว
```

### การเปลี่ยนแปลงที่สำคัญ:

1. **User Model:** เพิ่ม `Role string` field
2. **Database:** เพิ่ม `role VARCHAR(50)` column
3. **UserService:** รองรับการจัดการ role
4. **Demo Data:** อัพเดท SQL structure ใหม่

### การทดสอบหลังแก้ไข:

1. Login ด้วย `admin2@smart-solutions.com` / `admin123`
2. ไปที่ `https://internship.samartsolution.com/admin/users`
3. คลิก **"+ เพิ่มผู้ใช้งาน"**
4. กรอกข้อมูล:
   - รหัสประจำตัว: `test123`
   - ชื่อ: `ทดสอบ`
   - นามสกุล: `ระบบ`
   - อีเมล: `test123@example.com`
   - ตำแหน่ง: `student`
   - รหัสผ่าน: `123456`
5. คลิก **"เพิ่มผู้ใช้งาน"**
6. ตรวจสอบว่าผู้ใช้งานใหม่แสดงในรายชื่อ

---

**วันที่อัพเดทล่าสุด:** 28 กันยายน 2025 (แก้ไขปัญหาการสร้างผู้ใช้งาน)
