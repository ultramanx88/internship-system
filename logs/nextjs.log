
> nextn@0.1.0 predev
> prisma generate

warn The configuration property `package.json#prisma` is deprecated and will be removed in Prisma 7. Please migrate to a Prisma config file (e.g., `prisma.config.ts`).
For more information, see: https://pris.ly/prisma-config

Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

✔ Generated Prisma Client (v6.16.3) to ./node_modules/@prisma/client in 1.47s

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Interested in query caching in just a few lines of code? Try Accelerate today! https://pris.ly/tip-3-accelerate


> nextn@0.1.0 dev
> next dev -p 8080

   ▲ Next.js 15.3.3
   - Local:        http://localhost:8080
   - Network:      http://192.168.0.3:8080
   - Environments: .env.local, .env

 ✓ Starting...
 ✓ Ready in 13.2s
 ○ Compiling /api/socket ...
 ✓ Compiled /api/socket in 5.7s (72 modules)
🔌 Setting up Socket.io server...
🔌 Initializing Socket.io server...
 GET /api/socket?EIO=4&transport=polling&t=vzo12vyw 200 in 6989ms
👤 Client connected: C9f4iIVPaDDNuM9_AAAB
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: C9f4iIVPaDDNuM9_AAAB
 ○ Compiling /api/academic-years ...
👤 Client connected: smN3OdvJjdqXUNwXAAAD
👤 User adminPick joined their room
👑 Admin joined admin room
 ✓ Compiled /api/academic-years in 14.5s (735 modules)
Fetching academic years with whereClause: {}
prisma:info Starting a sqlite pool with 5 connections.
prisma:query SELECT `main`.`academic_years`.`id`, `main`.`academic_years`.`year`, `main`.`academic_years`.`name`, `main`.`academic_years`.`startDate`, `main`.`academic_years`.`endDate`, `main`.`academic_years`.`isActive`, `main`.`academic_years`.`createdAt`, `main`.`academic_years`.`updatedAt`, COALESCE(`aggr_selection_0_Semester`.`_aggr_count_semesters`, 0) AS `_aggr_count_semesters`, COALESCE(`aggr_selection_1_EducatorRoleAssignment`.`_aggr_count_roleAssignments`, 0) AS `_aggr_count_roleAssignments` FROM `main`.`academic_years` LEFT JOIN (SELECT `main`.`semesters`.`academicYearId`, COUNT(*) AS `_aggr_count_semesters` FROM `main`.`semesters` WHERE 1=1 GROUP BY `main`.`semesters`.`academicYearId`) AS `aggr_selection_0_Semester` ON (`main`.`academic_years`.`id` = `aggr_selection_0_Semester`.`academicYearId`) LEFT JOIN (SELECT `main`.`educator_role_assignments`.`academicYearId`, COUNT(*) AS `_aggr_count_roleAssignments` FROM `main`.`educator_role_assignments` WHERE 1=1 GROUP BY `main`.`educator_role_assignments`.`academicYearId`) AS `aggr_selection_1_EducatorRoleAssignment` ON (`main`.`academic_years`.`id` = `aggr_selection_1_EducatorRoleAssignment`.`academicYearId`) WHERE 1=1 ORDER BY `main`.`academic_years`.`year` DESC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`semesters`.`id`, `main`.`semesters`.`name`, `main`.`semesters`.`startDate`, `main`.`semesters`.`endDate`, `main`.`semesters`.`isActive`, `main`.`semesters`.`academicYearId` FROM `main`.`semesters` WHERE `main`.`semesters`.`academicYearId` IN (?,?) LIMIT ? OFFSET ?
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`academic_years`.`id` FROM `main`.`academic_years` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
Found academic years: 2
 GET /api/academic-years 200 in 24388ms
👋 Client disconnected: smN3OdvJjdqXUNwXAAAD
 ✓ Compiled in 862ms (191 modules)
👤 Client connected: AtmDP5lijcMndMWEAAAF
👤 User adminPick joined their room
👋 Client disconnected: AtmDP5lijcMndMWEAAAF
👤 Client connected: w9-0eJjUpKMHxrVXAAAH
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: w9-0eJjUpKMHxrVXAAAH
👤 Client connected: uha819TbYS0fZfPmAAAJ
👤 User adminPick joined their room
👋 Client disconnected: uha819TbYS0fZfPmAAAJ
👤 Client connected: 15MmGKnj-bPzOW-9AAAL
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: 15MmGKnj-bPzOW-9AAAL
👤 Client connected: 2mYjz7Q-22TElDS9AAAN
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: 2mYjz7Q-22TElDS9AAAN
👤 Client connected: 1hJRThxMsE-U0rQ-AAAP
👤 User adminPick joined their room
 ○ Compiling /api/students ...
 ✓ Compiled /api/students in 7.1s (708 modules)
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`users`.`id` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`name`, `main`.`users`.`email`, `main`.`users`.`roles`, `main`.`users`.`t_title`, `main`.`users`.`t_name`, `main`.`users`.`t_middle_name`, `main`.`users`.`t_surname`, `main`.`users`.`e_title`, `main`.`users`.`e_name`, `main`.`users`.`e_middle_name`, `main`.`users`.`e_surname`, `main`.`users`.`studentYear` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) ORDER BY `main`.`users`.`updatedAt` DESC, `main`.`users`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/students?role=educators&limit=1000 200 in 8103ms
👋 Client disconnected: 1hJRThxMsE-U0rQ-AAAP
👤 Client connected: W37MHApbjkO_4QFiAAAR
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: W37MHApbjkO_4QFiAAAR
👤 Client connected: agz2Rj6h-mv8n8CAAAAT
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: agz2Rj6h-mv8n8CAAAAT
👤 Client connected: KstV3fFDSYfiHdBXAAAV
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: KstV3fFDSYfiHdBXAAAV
👤 Client connected: gsV1ErOJzaKsMw5fAAAX
👤 User adminPick joined their room
👋 Client disconnected: gsV1ErOJzaKsMw5fAAAX
👤 Client connected: R8E553wQB4AyO9d7AAAZ
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: R8E553wQB4AyO9d7AAAZ
👤 Client connected: qGt59VtxvOTEVqcjAAAb
👤 User adminPick joined their room
👋 Client disconnected: qGt59VtxvOTEVqcjAAAb
👤 Client connected: AW5m3XTMYJxrFrldAAAd
👤 User adminPick joined their room
👋 Client disconnected: AW5m3XTMYJxrFrldAAAd
👤 Client connected: NkyQL7V8Sv62SkTkAAAf
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: NkyQL7V8Sv62SkTkAAAf
👤 Client connected: DnnTa4lxkU7J1LnDAAAh
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: DnnTa4lxkU7J1LnDAAAh
👤 Client connected: iHFaO58dejQjSB-GAAAj
👤 User adminPick joined their room
👋 Client disconnected: iHFaO58dejQjSB-GAAAj
 ○ Compiling /admin/educator-roles ...
👤 Client connected: VB3ADtEgwreg8kICAAAl
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: VB3ADtEgwreg8kICAAAl
👤 Client connected: mshuaqTaZ2VEXwb3AAAn
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: mshuaqTaZ2VEXwb3AAAn
👤 Client connected: VWTl-j-MaM3UDcfCAAAp
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: VWTl-j-MaM3UDcfCAAAp
👤 Client connected: LFI4V7-OrEdhniJ0AAAr
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: LFI4V7-OrEdhniJ0AAAr
👤 Client connected: jIn295KFIhEFIIq6AAAt
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: jIn295KFIhEFIIq6AAAt
👤 Client connected: 4NsGyJXhKXjBZbWVAAAv
👤 User adminPick joined their room
👑 Admin joined admin room
 ✓ Compiled /admin/educator-roles in 41.1s (1570 modules)
 GET /admin/educator-roles 200 in 46799ms
 ○ Compiling /api/health ...
👋 Client disconnected: 4NsGyJXhKXjBZbWVAAAv
 ✓ Compiled /api/health in 31.5s (1601 modules)
 GET /api/health 200 in 34602ms
👤 Client connected: xrSrgtlCRFcc_yTIAAAx
👤 User adminPick joined their room
👑 Admin joined admin room
👋 Client disconnected: xrSrgtlCRFcc_yTIAAAx
👤 Client connected: MIWXg3d1U1e8ABj4AAAz
👤 User adminPick joined their room
 ○ Compiling /api/auth/login ...
 ✓ Compiled /api/auth/login in 9s (973 modules)
 Login API called
 Request body: {
  identifier: 'admin@smart-solutions.com',
  role: 'admin',
  password: '***'
}
Database connected
prisma:query SELECT 1
User found: System Administrator admin@smart-solutions.com
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`email`, `main`.`users`.`name`, `main`.`users`.`password`, `main`.`users`.`roles` FROM `main`.`users` WHERE (`main`.`users`.`id` = ? OR `main`.`users`.`email` = ?) LIMIT ? OFFSET ?
Password valid: false
 POST /api/auth/login 401 in 16240ms
 Login API called
 Request body: { identifier: 'ultramanx88@gmail.com', role: 'admin', password: '***' }
Database connected
prisma:query SELECT 1
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`email`, `main`.`users`.`name`, `main`.`users`.`password`, `main`.`users`.`roles` FROM `main`.`users` WHERE (`main`.`users`.`id` = ? OR `main`.`users`.`email` = ?) LIMIT ? OFFSET ?
User found: ธเนศ บุญทัพ ultramanx88@gmail.com
Password valid: false
 POST /api/auth/login 401 in 1580ms
👋 Client disconnected: MIWXg3d1U1e8ABj4AAAz
 Login API called
 Request body: { identifier: 'ultramanx88@gmail.com', role: 'admin', password: '***' }
Database connected
prisma:query SELECT 1
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`email`, `main`.`users`.`name`, `main`.`users`.`password`, `main`.`users`.`roles` FROM `main`.`users` WHERE (`main`.`users`.`id` = ? OR `main`.`users`.`email` = ?) LIMIT ? OFFSET ?
User found: ธเนศ บุญทัพ ultramanx88@gmail.com
Password valid: true
User roles: [ 'admin' ]
Checking role access: admin in [ 'admin' ]
Login successful for: ธเนศ บุญทัพ
 POST /api/auth/login 200 in 2702ms
 ○ Compiling /api/students ...
 ✓ Compiled /api/students in 2.7s (198 modules)
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`users`.`id` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`name`, `main`.`users`.`email`, `main`.`users`.`roles`, `main`.`users`.`t_title`, `main`.`users`.`t_name`, `main`.`users`.`t_middle_name`, `main`.`users`.`t_surname`, `main`.`users`.`e_title`, `main`.`users`.`e_name`, `main`.`users`.`e_middle_name`, `main`.`users`.`e_surname`, `main`.`users`.`studentYear` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) ORDER BY `main`.`users`.`updatedAt` DESC, `main`.`users`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/students?role=educators&limit=5 200 in 3321ms
 ○ Compiling /api/academic-years ...
 ✓ Compiled /api/academic-years in 2.7s (191 modules)
Fetching academic years with whereClause: {}
prisma:query SELECT 1
prisma:query SELECT `main`.`academic_years`.`id`, `main`.`academic_years`.`year`, `main`.`academic_years`.`name`, `main`.`academic_years`.`startDate`, `main`.`academic_years`.`endDate`, `main`.`academic_years`.`isActive`, `main`.`academic_years`.`createdAt`, `main`.`academic_years`.`updatedAt`, COALESCE(`aggr_selection_0_Semester`.`_aggr_count_semesters`, 0) AS `_aggr_count_semesters`, COALESCE(`aggr_selection_1_EducatorRoleAssignment`.`_aggr_count_roleAssignments`, 0) AS `_aggr_count_roleAssignments` FROM `main`.`academic_years` LEFT JOIN (SELECT `main`.`semesters`.`academicYearId`, COUNT(*) AS `_aggr_count_semesters` FROM `main`.`semesters` WHERE 1=1 GROUP BY `main`.`semesters`.`academicYearId`) AS `aggr_selection_0_Semester` ON (`main`.`academic_years`.`id` = `aggr_selection_0_Semester`.`academicYearId`) LEFT JOIN (SELECT `main`.`educator_role_assignments`.`academicYearId`, COUNT(*) AS `_aggr_count_roleAssignments` FROM `main`.`educator_role_assignments` WHERE 1=1 GROUP BY `main`.`educator_role_assignments`.`academicYearId`) AS `aggr_selection_1_EducatorRoleAssignment` ON (`main`.`academic_years`.`id` = `aggr_selection_1_EducatorRoleAssignment`.`academicYearId`) WHERE 1=1 ORDER BY `main`.`academic_years`.`year` DESC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`semesters`.`id`, `main`.`semesters`.`name`, `main`.`semesters`.`startDate`, `main`.`semesters`.`endDate`, `main`.`semesters`.`isActive`, `main`.`semesters`.`academicYearId` FROM `main`.`semesters` WHERE `main`.`semesters`.`academicYearId` IN (?,?) LIMIT ? OFFSET ?
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`academic_years`.`id` FROM `main`.`academic_years` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
Found academic years: 2
 GET /api/academic-years 200 in 3193ms
 ○ Compiling /api/semesters ...
 ✓ Compiled /api/semesters in 8.5s (968 modules)
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT `main`.`semesters`.`id`, `main`.`semesters`.`name`, `main`.`semesters`.`academicYearId`, `main`.`semesters`.`startDate`, `main`.`semesters`.`endDate`, `main`.`semesters`.`isActive`, `main`.`semesters`.`createdAt`, `main`.`semesters`.`updatedAt`, COALESCE(`aggr_selection_0_EducatorRoleAssignment`.`_aggr_count_roleAssignments`, 0) AS `_aggr_count_roleAssignments` FROM `main`.`semesters` LEFT JOIN `main`.`academic_years` AS `orderby_1` ON (`orderby_1`.`id`) = (`main`.`semesters`.`academicYearId`) LEFT JOIN (SELECT `main`.`educator_role_assignments`.`semesterId`, COUNT(*) AS `_aggr_count_roleAssignments` FROM `main`.`educator_role_assignments` WHERE 1=1 GROUP BY `main`.`educator_role_assignments`.`semesterId`) AS `aggr_selection_0_EducatorRoleAssignment` ON (`main`.`semesters`.`id` = `aggr_selection_0_EducatorRoleAssignment`.`semesterId`) WHERE 1=1 ORDER BY `orderby_1`.`year` DESC, `main`.`semesters`.`startDate` DESC LIMIT ? OFFSET ?
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`semesters`.`id` FROM `main`.`semesters` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`academic_years`.`id`, `main`.`academic_years`.`year`, `main`.`academic_years`.`name`, `main`.`academic_years`.`isActive` FROM `main`.`academic_years` WHERE `main`.`academic_years`.`id` IN (?,?) LIMIT ? OFFSET ?
 GET /api/semesters 200 in 9703ms
 ✓ Compiled in 2.5s (791 modules)
 ✓ Compiled in 3.4s (791 modules)
 ✓ Compiled in 1069ms (791 modules)
 ✓ Compiled in 1058ms (791 modules)
