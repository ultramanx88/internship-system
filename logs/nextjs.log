
> nextn@0.1.0 predev
> prisma generate

warn The configuration property `package.json#prisma` is deprecated and will be removed in Prisma 7. Please migrate to a Prisma config file (e.g., `prisma.config.ts`).
For more information, see: https://pris.ly/prisma-config

Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

âœ” Generated Prisma Client (v6.16.3) to ./node_modules/@prisma/client in 447ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Need your database queries to be 1000x faster? Accelerate offers you that and more: https://pris.ly/tip-2-accelerate


> nextn@0.1.0 dev
> next dev -p 8080

   â–² Next.js 15.3.3
   - Local:        http://localhost:8080
   - Network:      http://192.168.0.2:8080
   - Environments: .env.local, .env

 âœ“ Starting...
 âœ“ Ready in 4.5s
 â—‹ Compiling /login ...
 âœ“ Compiled /login in 6.3s (1116 modules)
 GET /login 200 in 8301ms
 âš  The "images.domains" configuration is deprecated. Please use "images.remotePatterns" configuration instead.
 â—‹ Compiling /api/socket ...
 âœ“ Compiled /api/socket in 1224ms (710 modules)
ğŸ”Œ Setting up Socket.io server...
ğŸ”Œ Initializing Socket.io server...
âœ… Socket.io server already running
 GET /api/socket?EIO=4&transport=polling&t=xjf1jues 200 in 1464ms
 GET /api/socket?EIO=4&transport=polling&t=xjez0tlc 200 in 1583ms
ğŸ‘¤ Client connected: yVKXty7rM57W7nKDAAAB
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: yVKXty7rM57W7nKDAAAB
 â—‹ Compiling /api/auth/verify ...
 âœ“ Compiled /api/auth/verify in 2.8s (1461 modules)
ğŸ” Auth verify API called
ğŸ“ Request body: { identifier: 'admin@smart-solutions.com', password: '***' }
prisma:info Starting a sqlite pool with 5 connections.
âœ… Database connected
ğŸ” Searching for user: admin@smart-solutions.com
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`email`, `main`.`users`.`name`, `main`.`users`.`password`, `main`.`users`.`roles` FROM `main`.`users` WHERE (`main`.`users`.`id` = ? OR `main`.`users`.`email` = ?) LIMIT ? OFFSET ?
âœ… User found: System Administrator admin@smart-solutions.com
ğŸ” Password valid: true
ğŸ‘¤ User roles: [ 'admin' ]
âœ… Authentication successful for: System Administrator
 POST /api/auth/verify 200 in 4694ms
 GET /login 200 in 1978ms
 â—‹ Compiling /api/auth/login ...
 âœ“ Compiled /api/auth/login in 792ms (1463 modules)
 Login API called
 Request body: {
  identifier: 'admin@smart-solutions.com',
  role: 'admin',
  password: '***'
}
Database connected
User found: System Administrator admin@smart-solutions.com
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`email`, `main`.`users`.`name`, `main`.`users`.`password`, `main`.`users`.`roles` FROM `main`.`users` WHERE (`main`.`users`.`id` = ? OR `main`.`users`.`email` = ?) LIMIT ? OFFSET ?
Password valid: true
User roles: [ 'admin' ]
Checking role access: admin in [ 'admin' ]
Login successful for: System Administrator
 POST /api/auth/login 200 in 2150ms
 GET /login 200 in 1996ms
ğŸ‘¤ Client connected: aYaj1-_y7sNMaYIYAAAD
ğŸ‘¤ User user_admin joined their room
 â—‹ Compiling /admin ...
 âœ“ Compiled /admin in 2.6s (1637 modules)
 GET /admin 200 in 2928ms
 â—‹ Compiling /api/user/profile ...
 âœ“ Compiled /api/user/profile in 1104ms (1639 modules)
 GET /api/user/profile 200 in 1245ms
 GET /api/user/profile 200 in 19ms
 â—‹ Compiling /admin/settings ...
 âœ“ Compiled /admin/settings in 4.9s (3344 modules)
 GET /admin/settings 200 in 5202ms
 â—‹ Compiling /api/document-template ...
 âœ“ Compiled /api/document-template in 2s (3350 modules)
prisma:query SELECT 1
prisma:query SELECT `main`.`faculties`.`id`, `main`.`faculties`.`nameTh`, `main`.`faculties`.`nameEn`, `main`.`faculties`.`code`, `main`.`faculties`.`isActive`, `main`.`faculties`.`createdAt`, `main`.`faculties`.`updatedAt`, COALESCE(`aggr_selection_0_Department`.`_aggr_count_departments`, 0) AS `_aggr_count_departments`, COALESCE(`aggr_selection_1_User`.`_aggr_count_users`, 0) AS `_aggr_count_users` FROM `main`.`faculties` LEFT JOIN (SELECT `main`.`departments`.`facultyId`, COUNT(*) AS `_aggr_count_departments` FROM `main`.`departments` WHERE 1=1 GROUP BY `main`.`departments`.`facultyId`) AS `aggr_selection_0_Department` ON (`main`.`faculties`.`id` = `aggr_selection_0_Department`.`facultyId`) LEFT JOIN (SELECT `main`.`users`.`facultyId`, COUNT(*) AS `_aggr_count_users` FROM `main`.`users` WHERE 1=1 GROUP BY `main`.`users`.`facultyId`) AS `aggr_selection_1_User` ON (`main`.`faculties`.`id` = `aggr_selection_1_User`.`facultyId`) WHERE `main`.`faculties`.`isActive` = ? ORDER BY `main`.`faculties`.`nameTh` ASC LIMIT ? OFFSET ?
 GET /api/document-template 401 in 2278ms
 GET /api/faculties 200 in 2283ms
 GET /api/document-template 401 in 68ms
prisma:query SELECT `main`.`faculties`.`id`, `main`.`faculties`.`nameTh`, `main`.`faculties`.`nameEn`, `main`.`faculties`.`code`, `main`.`faculties`.`isActive`, `main`.`faculties`.`createdAt`, `main`.`faculties`.`updatedAt`, COALESCE(`aggr_selection_0_Department`.`_aggr_count_departments`, 0) AS `_aggr_count_departments`, COALESCE(`aggr_selection_1_User`.`_aggr_count_users`, 0) AS `_aggr_count_users` FROM `main`.`faculties` LEFT JOIN (SELECT `main`.`departments`.`facultyId`, COUNT(*) AS `_aggr_count_departments` FROM `main`.`departments` WHERE 1=1 GROUP BY `main`.`departments`.`facultyId`) AS `aggr_selection_0_Department` ON (`main`.`faculties`.`id` = `aggr_selection_0_Department`.`facultyId`) LEFT JOIN (SELECT `main`.`users`.`facultyId`, COUNT(*) AS `_aggr_count_users` FROM `main`.`users` WHERE 1=1 GROUP BY `main`.`users`.`facultyId`) AS `aggr_selection_1_User` ON (`main`.`faculties`.`id` = `aggr_selection_1_User`.`facultyId`) WHERE `main`.`faculties`.`isActive` = ? ORDER BY `main`.`faculties`.`nameTh` ASC LIMIT ? OFFSET ?
 GET /api/faculties 200 in 80ms
 â—‹ Compiling /admin/educator-roles ...
 âœ“ Compiled /admin/educator-roles in 2.7s (3379 modules)
 GET /admin/educator-roles 200 in 2930ms
 â—‹ Compiling /api/educator-role-assignments ...
 âœ“ Compiled /api/educator-role-assignments in 6.5s (3388 modules)
 GET /api/academic-years 401 in 7083ms
 GET /api/semesters 401 in 7090ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 7071ms
 GET /api/students?role=educators&limit=1000 401 in 7117ms
 GET /api/academic-years 401 in 152ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 342ms
 GET /api/students?role=educators&limit=1000 401 in 348ms
 GET /api/semesters 401 in 361ms
ğŸ‘‹ Client disconnected: aYaj1-_y7sNMaYIYAAAD
ğŸ‘¤ Client connected: 2IsTTLtfgFyuWY_9AAAF
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 2IsTTLtfgFyuWY_9AAAF
ğŸ‘¤ Client connected: 4XWDAgGhIngQPy3kAAAH
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 4XWDAgGhIngQPy3kAAAH
 GET /admin/educator-roles 200 in 1001ms
 GET /api/students?role=educators&limit=1000 401 in 61ms
 GET /api/user/profile 200 in 104ms
 GET /api/academic-years 401 in 96ms
 GET /api/semesters 401 in 89ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 61ms
 GET /api/user/profile 200 in 26ms
 GET /api/students?role=educators&limit=1000 401 in 33ms
ğŸ‘¤ Client connected: lWZVFRpqQ-uqIV_LAAAK
 GET /api/academic-years 401 in 203ms
 GET /api/semesters 401 in 209ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 171ms
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: lWZVFRpqQ-uqIV_LAAAK
 GET /admin/educator-roles 200 in 350ms
 GET /api/user/profile 200 in 44ms
 GET /api/students?role=educators&limit=1000 401 in 174ms
ğŸ‘¤ Client connected: CtKV1RS1GfLUSY1YAAAN
 GET /api/semesters 401 in 239ms
 GET /api/academic-years 401 in 298ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 424ms
 GET /api/user/profile 200 in 478ms
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
 GET /api/students?role=educators&limit=1000 401 in 479ms
 GET /api/semesters 401 in 116ms
 GET /api/academic-years 401 in 140ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 151ms
 âœ“ Compiled in 7.9s (3391 modules)
 GET /admin/educator-roles 200 in 336ms
 âœ“ Compiled in 1350ms (3391 modules)
 GET /admin/educator-roles 200 in 138ms
ğŸ‘‹ Client disconnected: CtKV1RS1GfLUSY1YAAAN
 GET /admin/educator-roles 200 in 987ms
 GET /api/user/profile 200 in 44ms
 GET /api/students?role=educators&limit=1000 401 in 43ms
 GET /api/academic-years 401 in 80ms
 GET /api/semesters 401 in 234ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 241ms
 GET /api/students?role=educators&limit=1000 401 in 247ms
 GET /api/user/profile 200 in 254ms
 GET /api/academic-years 401 in 232ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 61ms
 GET /api/semesters 401 in 64ms
ğŸ‘¤ Client connected: 0O9C9xv4e1vZCJNkAAAQ
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 0O9C9xv4e1vZCJNkAAAQ
ğŸ‘¤ Client connected: OWvJ0QNbUhogzMefAAAS
 GET /login 200 in 252ms
 GET /login 200 in 234ms
ğŸ‘‹ Client disconnected: OWvJ0QNbUhogzMefAAAS
 â—‹ Compiling /api/auth/verify ...
 âœ“ Compiled /api/auth/verify in 1305ms (1724 modules)
ğŸ” Auth verify API called
ğŸ“ Request body: { identifier: 'admin@smart-solutions.com', password: '***' }
âœ… Database connected
ğŸ” Searching for user: admin@smart-solutions.com
prisma:query SELECT 1
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`email`, `main`.`users`.`name`, `main`.`users`.`password`, `main`.`users`.`roles` FROM `main`.`users` WHERE (`main`.`users`.`id` = ? OR `main`.`users`.`email` = ?) LIMIT ? OFFSET ?
âœ… User found: System Administrator admin@smart-solutions.com
ğŸ” Password valid: true
ğŸ‘¤ User roles: [ 'admin' ]
âœ… Authentication successful for: System Administrator
 POST /api/auth/verify 200 in 2169ms
 â—‹ Compiling /api/auth/login ...
 âœ“ Compiled /api/auth/login in 592ms (1726 modules)
 Login API called
 Request body: {
  identifier: 'admin@smart-solutions.com',
  role: 'admin',
  password: '***'
}
Database connected
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`email`, `main`.`users`.`name`, `main`.`users`.`password`, `main`.`users`.`roles` FROM `main`.`users` WHERE (`main`.`users`.`id` = ? OR `main`.`users`.`email` = ?) LIMIT ? OFFSET ?
User found: System Administrator admin@smart-solutions.com
Password valid: true
User roles: [ 'admin' ]
Checking role access: admin in [ 'admin' ]
Login successful for: System Administrator
 POST /api/auth/login 200 in 1218ms
ğŸ‘¤ Client connected: 1nDitZ2YdFc3MCVLAAAU
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 1nDitZ2YdFc3MCVLAAAU
 GET /admin 200 in 269ms
 GET /api/user/profile 200 in 101ms
 GET /api/user/profile 200 in 25ms
ğŸ‘¤ Client connected: pNB9z5qop5xKT_iFAAAW
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
 GET /admin/educator-roles 200 in 285ms
 GET /api/students?role=educators&limit=1000 401 in 94ms
 GET /api/academic-years 401 in 119ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 128ms
 GET /api/semesters 401 in 146ms
 GET /api/students?role=educators&limit=1000 401 in 116ms
 GET /api/academic-years 401 in 93ms
 GET /api/educator-role-assignments?page=1&limit=10 401 in 100ms
 GET /api/semesters 401 in 109ms
ğŸ‘‹ Client disconnected: pNB9z5qop5xKT_iFAAAW
ğŸ‘¤ Client connected: 4mvnoo76dhdpamdDAAAY
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
 â—‹ Compiling /admin/users ...
 âœ“ Compiled /api/educator-role-assignments in 15.1s (3483 modules)
Error fetching semesters: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/semesters/route.ts:48:22)
  46 |     // Get semesters with related data
  47 |     const [semesters, total] = await Promise.all([
> 48 |       prisma.semester.findMany({
     |                      ^
  49 |         where: whereClause,
  50 |         include: {
  51 |           academicYear: {
Error fetching educator role assignments: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/educator-role-assignments/route.ts:51:36)
  49 |     // Get assignments with related data
  50 |     const [assignments, total] = await Promise.all([
> 51 |       prisma.educatorRoleAssignment.findMany({
     |                                    ^
  52 |         where: whereClause,
  53 |         include: {
  54 |           educator: {
Error fetching academic years: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/academic-years/route.ts:44:26)
  42 |     // Get academic years with related data
  43 |     const [academicYears, total] = await Promise.all([
> 44 |       prisma.academicYear.findMany({
     |                          ^
  45 |         where: whereClause,
  46 |         include: {
  47 |           semesters: {
prisma:query SELECT 1
 GET /api/semesters 500 in 5055ms
 GET /api/educator-role-assignments?page=1&limit=10 500 in 5050ms
 GET /api/academic-years 500 in 5058ms
 GET /api/students?role=educators&limit=1000 200 in 5071ms
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`users`.`id` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`name`, `main`.`users`.`email`, `main`.`users`.`roles`, `main`.`users`.`t_title`, `main`.`users`.`t_name`, `main`.`users`.`t_middle_name`, `main`.`users`.`t_surname`, `main`.`users`.`e_title`, `main`.`users`.`e_name`, `main`.`users`.`e_middle_name`, `main`.`users`.`e_surname`, `main`.`users`.`studentYear` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) ORDER BY `main`.`users`.`updatedAt` DESC, `main`.`users`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /admin/users 200 in 16148ms
 GET /admin/settings 200 in 236ms
ğŸ‘‹ Client disconnected: 4mvnoo76dhdpamdDAAAY
ğŸ‘¤ Client connected: v-sZPFYglGqc8hWxAAAa
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: v-sZPFYglGqc8hWxAAAa
ğŸ‘¤ Client connected: BCtMyZcuW4l4wq7cAAAc
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: BCtMyZcuW4l4wq7cAAAc
 GET /admin/educator-roles 200 in 1134ms
ğŸ‘¤ Client connected: Q7mbVViicxyUoj6lAAAf
 â—‹ Compiling /api/educator-role-assignments ...
 âœ“ Compiled /api/educator-role-assignments in 1172ms (1699 modules)
 âœ“ Compiled (1720 modules)
Error fetching semesters: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/semesters/route.ts:48:22)
  46 |     // Get semesters with related data
  47 |     const [semesters, total] = await Promise.all([
> 48 |       prisma.semester.findMany({
     |                      ^
  49 |         where: whereClause,
  50 |         include: {
  51 |           academicYear: {
Error fetching educator role assignments: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/educator-role-assignments/route.ts:51:36)
  49 |     // Get assignments with related data
  50 |     const [assignments, total] = await Promise.all([
> 51 |       prisma.educatorRoleAssignment.findMany({
     |                                    ^
  52 |         where: whereClause,
  53 |         include: {
  54 |           educator: {
Error fetching academic years: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/academic-years/route.ts:44:26)
  42 |     // Get academic years with related data
  43 |     const [academicYears, total] = await Promise.all([
> 44 |       prisma.academicYear.findMany({
     |                          ^
  45 |         where: whereClause,
  46 |         include: {
  47 |           semesters: {
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`users`.`id` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT 1
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`name`, `main`.`users`.`email`, `main`.`users`.`roles`, `main`.`users`.`t_title`, `main`.`users`.`t_name`, `main`.`users`.`t_middle_name`, `main`.`users`.`t_surname`, `main`.`users`.`e_title`, `main`.`users`.`e_name`, `main`.`users`.`e_middle_name`, `main`.`users`.`e_surname`, `main`.`users`.`studentYear` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) ORDER BY `main`.`users`.`updatedAt` DESC, `main`.`users`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/user/profile 200 in 2130ms
 GET /api/semesters 500 in 2179ms
 GET /api/educator-role-assignments?page=1&limit=10 500 in 2174ms
 GET /api/academic-years 500 in 2180ms
 GET /api/students?role=educators&limit=1000 200 in 2180ms
ğŸ‘¤ User user_admin joined their room
 GET /api/user/profile 200 in 301ms
ğŸ‘‘ Admin joined admin room
Error fetching semesters: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/semesters/route.ts:48:22)
  46 |     // Get semesters with related data
  47 |     const [semesters, total] = await Promise.all([
> 48 |       prisma.semester.findMany({
     |                      ^
  49 |         where: whereClause,
  50 |         include: {
  51 |           academicYear: {
Error fetching educator role assignments: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/educator-role-assignments/route.ts:51:36)
  49 |     // Get assignments with related data
  50 |     const [assignments, total] = await Promise.all([
> 51 |       prisma.educatorRoleAssignment.findMany({
     |                                    ^
  52 |         where: whereClause,
  53 |         include: {
  54 |           educator: {
Error fetching academic years: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/academic-years/route.ts:44:26)
  42 |     // Get academic years with related data
  43 |     const [academicYears, total] = await Promise.all([
> 44 |       prisma.academicYear.findMany({
     |                          ^
  45 |         where: whereClause,
  46 |         include: {
  47 |           semesters: {
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`users`.`id` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`name`, `main`.`users`.`email`, `main`.`users`.`roles`, `main`.`users`.`t_title`, `main`.`users`.`t_name`, `main`.`users`.`t_middle_name`, `main`.`users`.`t_surname`, `main`.`users`.`e_title`, `main`.`users`.`e_name`, `main`.`users`.`e_middle_name`, `main`.`users`.`e_surname`, `main`.`users`.`studentYear` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) ORDER BY `main`.`users`.`updatedAt` DESC, `main`.`users`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/semesters 500 in 604ms
 GET /api/educator-role-assignments?page=1&limit=10 500 in 605ms
 GET /api/academic-years 500 in 605ms
 GET /api/students?role=educators&limit=1000 200 in 604ms
 GET /admin/settings 200 in 252ms
 â—‹ Compiling /api/document-template ...
 âœ“ Compiled /api/document-template in 2s (1723 modules)
 âœ“ Compiled (1725 modules)
 GET /api/document-template 401 in 2833ms
 GET /api/faculties 200 in 2865ms
prisma:query SELECT 1
prisma:query SELECT `main`.`faculties`.`id`, `main`.`faculties`.`nameTh`, `main`.`faculties`.`nameEn`, `main`.`faculties`.`code`, `main`.`faculties`.`isActive`, `main`.`faculties`.`createdAt`, `main`.`faculties`.`updatedAt`, COALESCE(`aggr_selection_0_Department`.`_aggr_count_departments`, 0) AS `_aggr_count_departments`, COALESCE(`aggr_selection_1_User`.`_aggr_count_users`, 0) AS `_aggr_count_users` FROM `main`.`faculties` LEFT JOIN (SELECT `main`.`departments`.`facultyId`, COUNT(*) AS `_aggr_count_departments` FROM `main`.`departments` WHERE 1=1 GROUP BY `main`.`departments`.`facultyId`) AS `aggr_selection_0_Department` ON (`main`.`faculties`.`id` = `aggr_selection_0_Department`.`facultyId`) LEFT JOIN (SELECT `main`.`users`.`facultyId`, COUNT(*) AS `_aggr_count_users` FROM `main`.`users` WHERE 1=1 GROUP BY `main`.`users`.`facultyId`) AS `aggr_selection_1_User` ON (`main`.`faculties`.`id` = `aggr_selection_1_User`.`facultyId`) WHERE `main`.`faculties`.`isActive` = ? ORDER BY `main`.`faculties`.`nameTh` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`faculties`.`id`, `main`.`faculties`.`nameTh`, `main`.`faculties`.`nameEn`, `main`.`faculties`.`code`, `main`.`faculties`.`isActive`, `main`.`faculties`.`createdAt`, `main`.`faculties`.`updatedAt`, COALESCE(`aggr_selection_0_Department`.`_aggr_count_departments`, 0) AS `_aggr_count_departments`, COALESCE(`aggr_selection_1_User`.`_aggr_count_users`, 0) AS `_aggr_count_users` FROM `main`.`faculties` LEFT JOIN (SELECT `main`.`departments`.`facultyId`, COUNT(*) AS `_aggr_count_departments` FROM `main`.`departments` WHERE 1=1 GROUP BY `main`.`departments`.`facultyId`) AS `aggr_selection_0_Department` ON (`main`.`faculties`.`id` = `aggr_selection_0_Department`.`facultyId`) LEFT JOIN (SELECT `main`.`users`.`facultyId`, COUNT(*) AS `_aggr_count_users` FROM `main`.`users` WHERE 1=1 GROUP BY `main`.`users`.`facultyId`) AS `aggr_selection_1_User` ON (`main`.`faculties`.`id` = `aggr_selection_1_User`.`facultyId`) WHERE `main`.`faculties`.`isActive` = ? ORDER BY `main`.`faculties`.`nameTh` ASC LIMIT ? OFFSET ?
 GET /api/faculties 200 in 140ms
 GET /api/document-template 401 in 156ms
ğŸ‘‹ Client disconnected: Q7mbVViicxyUoj6lAAAf
ğŸ‘¤ Client connected: Taji5mKUZ-TqFVcfAAAh
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: Taji5mKUZ-TqFVcfAAAh
 GET /admin/educator-roles 200 in 184ms
Error fetching academic years: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/academic-years/route.ts:44:26)
  42 |     // Get academic years with related data
  43 |     const [academicYears, total] = await Promise.all([
> 44 |       prisma.academicYear.findMany({
     |                          ^
  45 |         where: whereClause,
  46 |         include: {
  47 |           semesters: {
Error fetching educator role assignments: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/educator-role-assignments/route.ts:51:36)
  49 |     // Get assignments with related data
  50 |     const [assignments, total] = await Promise.all([
> 51 |       prisma.educatorRoleAssignment.findMany({
     |                                    ^
  52 |         where: whereClause,
  53 |         include: {
  54 |           educator: {
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`users`.`id` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`name`, `main`.`users`.`email`, `main`.`users`.`roles`, `main`.`users`.`t_title`, `main`.`users`.`t_name`, `main`.`users`.`t_middle_name`, `main`.`users`.`t_surname`, `main`.`users`.`e_title`, `main`.`users`.`e_name`, `main`.`users`.`e_middle_name`, `main`.`users`.`e_surname`, `main`.`users`.`studentYear` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) ORDER BY `main`.`users`.`updatedAt` DESC, `main`.`users`.`createdAt` DESC LIMIT ? OFFSET ?
Error fetching semesters: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/semesters/route.ts:48:22)
  46 |     // Get semesters with related data
  47 |     const [semesters, total] = await Promise.all([
> 48 |       prisma.semester.findMany({
     |                      ^
  49 |         where: whereClause,
  50 |         include: {
  51 |           academicYear: {
 GET /api/academic-years 500 in 692ms
 GET /api/educator-role-assignments?page=1&limit=10 500 in 692ms
 GET /api/students?role=educators&limit=1000 200 in 694ms
 GET /api/semesters 500 in 692ms
Error fetching academic years: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/academic-years/route.ts:44:26)
  42 |     // Get academic years with related data
  43 |     const [academicYears, total] = await Promise.all([
> 44 |       prisma.academicYear.findMany({
     |                          ^
  45 |         where: whereClause,
  46 |         include: {
  47 |           semesters: {
 GET /api/academic-years 500 in 247ms
Error fetching educator role assignments: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/educator-role-assignments/route.ts:51:36)
  49 |     // Get assignments with related data
  50 |     const [assignments, total] = await Promise.all([
> 51 |       prisma.educatorRoleAssignment.findMany({
     |                                    ^
  52 |         where: whereClause,
  53 |         include: {
  54 |           educator: {
Error fetching semesters: TypeError: Cannot read properties of undefined (reading 'findMany')
    at GET (src/app/api/semesters/route.ts:48:22)
  46 |     // Get semesters with related data
  47 |     const [semesters, total] = await Promise.all([
> 48 |       prisma.semester.findMany({
     |                      ^
  49 |         where: whereClause,
  50 |         include: {
  51 |           academicYear: {
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`users`.`id` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`users`.`id`, `main`.`users`.`name`, `main`.`users`.`email`, `main`.`users`.`roles`, `main`.`users`.`t_title`, `main`.`users`.`t_name`, `main`.`users`.`t_middle_name`, `main`.`users`.`t_surname`, `main`.`users`.`e_title`, `main`.`users`.`e_name`, `main`.`users`.`e_middle_name`, `main`.`users`.`e_surname`, `main`.`users`.`studentYear` FROM `main`.`users` WHERE (`main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ? OR `main`.`users`.`roles` LIKE ?) ORDER BY `main`.`users`.`updatedAt` DESC, `main`.`users`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/educator-role-assignments?page=1&limit=10 500 in 448ms
 GET /api/semesters 500 in 449ms
 GET /api/students?role=educators&limit=1000 200 in 466ms
ğŸ‘¤ Client connected: 98D93UFOf7iEmwPbAAAj
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 98D93UFOf7iEmwPbAAAj
ğŸ‘¤ Client connected: O9C0ZUbnc50LyRqBAAAl
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: O9C0ZUbnc50LyRqBAAAl
ğŸ‘¤ Client connected: jE9ZbiK0CaOaP5QQAAAn
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: jE9ZbiK0CaOaP5QQAAAn
ğŸ‘¤ Client connected: VNwq19t5srODXXNHAAAp
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: VNwq19t5srODXXNHAAAp
ğŸ‘¤ Client connected: V5nI2wGeP0w6YKsrAAAr
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: V5nI2wGeP0w6YKsrAAAr
ğŸ‘¤ Client connected: 1jts06HoMQ6ElJFvAAAt
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: 1jts06HoMQ6ElJFvAAAt
ğŸ‘¤ Client connected: wlftzWwN3kdk28iJAAAv
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: wlftzWwN3kdk28iJAAAv
ğŸ‘¤ Client connected: dxf81F6S3fwwsj7nAAAx
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: dxf81F6S3fwwsj7nAAAx
ğŸ‘¤ Client connected: k1HB7-ubIJ5x_FMcAAAz
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: k1HB7-ubIJ5x_FMcAAAz
ğŸ‘¤ Client connected: SfFKAYbYlCpqt5SkAAA1
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: SfFKAYbYlCpqt5SkAAA1
ğŸ‘¤ Client connected: EPkyXOrLN_iWk-JlAAA3
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: EPkyXOrLN_iWk-JlAAA3
ğŸ‘¤ Client connected: tmgQWtBuO8qMpe73AAA5
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: tmgQWtBuO8qMpe73AAA5
ğŸ‘¤ Client connected: -ZkLGs1swoKAblg4AAA7
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: -ZkLGs1swoKAblg4AAA7
ğŸ‘¤ Client connected: DfubWDmeW4TOxvK9AAA9
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: DfubWDmeW4TOxvK9AAA9
ğŸ‘¤ Client connected: s16uB5OYfK_YFvjgAAA_
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: s16uB5OYfK_YFvjgAAA_
ğŸ‘¤ Client connected: a6Qdly3WhtuWOTbAAABB
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: a6Qdly3WhtuWOTbAAABB
ğŸ‘¤ Client connected: NaigEZaX_s6-U_RVAABD
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: NaigEZaX_s6-U_RVAABD
ğŸ‘¤ Client connected: wc0hhaOG1Ccjw16UAABF
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: wc0hhaOG1Ccjw16UAABF
ğŸ‘¤ Client connected: -pyJhTN0BUayfr2JAABH
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: -pyJhTN0BUayfr2JAABH
ğŸ‘¤ Client connected: 8QJ0KAFSOfTfzsJ8AABJ
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: 8QJ0KAFSOfTfzsJ8AABJ
ğŸ‘¤ Client connected: _121aVuzbMZN9GUQAABL
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: _121aVuzbMZN9GUQAABL
ğŸ‘¤ Client connected: rKtsEdmTCsA41fsmAABN
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: rKtsEdmTCsA41fsmAABN
ğŸ‘¤ Client connected: 4OhuukQdu-02app6AABP
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 4OhuukQdu-02app6AABP
ğŸ‘¤ Client connected: aaAnZNILVuEEkJM8AABR
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: aaAnZNILVuEEkJM8AABR
ğŸ‘¤ Client connected: l4WHNqY9nn9ovwIBAABT
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: l4WHNqY9nn9ovwIBAABT
ğŸ‘¤ Client connected: FBn3tAcDUvL5OSZLAABV
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: FBn3tAcDUvL5OSZLAABV
ğŸ‘¤ Client connected: htBOJN3AGUitT8ecAABX
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: htBOJN3AGUitT8ecAABX
ğŸ‘¤ Client connected: rYuRcxMOcaxu2tIRAABZ
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: rYuRcxMOcaxu2tIRAABZ
ğŸ‘¤ Client connected: PPxyDw4zVPCMvnLHAABb
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: PPxyDw4zVPCMvnLHAABb
ğŸ‘¤ Client connected: Q2pInzxQSbvemnYtAABd
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: Q2pInzxQSbvemnYtAABd
ğŸ‘¤ Client connected: snWne0KR7vDP5HRnAABf
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: snWne0KR7vDP5HRnAABf
ğŸ‘¤ Client connected: LzZ--U7Ez9pb-K71AABh
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: LzZ--U7Ez9pb-K71AABh
ğŸ‘¤ Client connected: -BaaIBljoDFGYy_aAABj
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: -BaaIBljoDFGYy_aAABj
ğŸ‘¤ Client connected: 1yTYwPxkmfMD7VRwAABl
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 1yTYwPxkmfMD7VRwAABl
ğŸ‘¤ Client connected: DO9_iT9PQ5E6TBZHAABn
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: DO9_iT9PQ5E6TBZHAABn
ğŸ‘¤ Client connected: TI5bvf_N5ZUIX1zGAABp
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: TI5bvf_N5ZUIX1zGAABp
ğŸ‘¤ Client connected: fCt8EVtnMhQ5lsSlAABr
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: fCt8EVtnMhQ5lsSlAABr
ğŸ‘¤ Client connected: R5ND3O5UW7lkduwDAABt
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: R5ND3O5UW7lkduwDAABt
ğŸ‘¤ Client connected: A0CmLq8kd1GLDSTpAABv
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: A0CmLq8kd1GLDSTpAABv
ğŸ‘¤ Client connected: ztGXPHG1_NznSYvjAABx
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: ztGXPHG1_NznSYvjAABx
ğŸ‘¤ Client connected: 3DpwfDERxi2dgsStAABz
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: 3DpwfDERxi2dgsStAABz
ğŸ‘¤ Client connected: ewRky8ea-9wrkK_8AAB1
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: ewRky8ea-9wrkK_8AAB1
ğŸ‘¤ Client connected: Uis_hm83vs51-8R0AAB3
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: Uis_hm83vs51-8R0AAB3
ğŸ‘¤ Client connected: PF4RpYM2aY2spOf4AAB5
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: PF4RpYM2aY2spOf4AAB5
ğŸ‘¤ Client connected: EeWlrf7664gaFa55AAB7
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: EeWlrf7664gaFa55AAB7
ğŸ‘¤ Client connected: yN8zjdQT_zmmaKN1AAB9
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: yN8zjdQT_zmmaKN1AAB9
ğŸ‘¤ Client connected: HOXzLbq8aqad9Gn2AAB_
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: HOXzLbq8aqad9Gn2AAB_
ğŸ‘¤ Client connected: M0Z73P6jvagbl6mhAACB
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: M0Z73P6jvagbl6mhAACB
ğŸ‘¤ Client connected: 2aes9fw4SIFiKlXeAACD
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 2aes9fw4SIFiKlXeAACD
ğŸ‘¤ Client connected: Od3KzkeS4acvgZzNAACF
ğŸ‘¤ User user_admin joined their room
ğŸ‘‹ Client disconnected: Od3KzkeS4acvgZzNAACF
ğŸ‘¤ Client connected: 5iWMyJBY5ofJFGk5AACH
ğŸ‘¤ User user_admin joined their room
ğŸ‘‘ Admin joined admin room
ğŸ‘‹ Client disconnected: 5iWMyJBY5ofJFGk5AACH
ğŸ‘¤ Client connected: HJoT-NcZshdM43YlAACJ
ğŸ‘¤ User user_admin joined their room
 GET /admin/educator-roles 200 in 122ms
ğŸ‘‹ Client disconnected: HJoT-NcZshdM43YlAACJ
[?25h
